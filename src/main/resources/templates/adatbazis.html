<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Mozi Adatbázis - Adatok</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
    <link rel="stylesheet" href="/assets/css/main.css" />
    <noscript><link rel="stylesheet" href="/assets/css/noscript.css" /></noscript>
    <style>
        table { margin-bottom: 50px; }
        h2, h3 { margin-top: 20px; color: #ffffff; border-bottom: 2px solid #ED4933; padding-bottom: 10px; display: inline-block; }
        .wrapper.style5 { padding: 4em 0 2em 0; }
        .pagination { display: flex; justify-content: center; gap: 20px; margin-top: 20px; }
        .pagination a { text-decoration: none; font-weight: bold; }

        /* Aktív gomb stílusa */
        .actions .button.primary { opacity: 0.5; } /* Inaktív gombok halványak */
        .actions .button.primary.active { opacity: 1; border: 2px solid white; } /* Aktív gomb */
    </style>
</head>
<body class="is-preload">

<div id="page-wrapper">

    <header id="header">
        <h1><a href="/">MoziDB</a></h1>
        <nav id="nav">
            <ul>
                <li class="special">
                    <a href="#menu" class="menuToggle"><span>Menü</span></a>
                    <div id="menu">
                        <ul>
                            <li><a href="/">Főoldal</a></li>
                            <li><a href="/adatbazis">Adatbázis</a></li>
                            <li><a href="/kapcsolat">Kapcsolat</a></li>
                            <li><a href="/diagram">Diagram</a></li>
                            <li sec:authorize="hasRole('ADMIN')"><a href="/film-kezeles" style="color: #ED4933;">CRUD (Szerkesztés)</a></li>
                            <li sec:authorize="hasRole('ADMIN')"><a href="/admin" style="color: #ED4933;">Admin Felület</a></li>
                            <li><a href="/rest-api">RESTful API</a></li>
                            <li sec:authorize="isAuthenticated()"><a href="/uzenetek">Üzenetek</a></li>
                            <li sec:authorize="!isAuthenticated()"><a href="/login">Belépés</a></li>
                            <li sec:authorize="!isAuthenticated()"><a href="/regisztral">Regisztráció</a></li>
                            <li sec:authorize="isAuthenticated()"><form th:action="@{/logout}" method="post" style="margin: 0;"><input type="submit" value="Kijelentkezés" class="button fit small" /></form></li>
                        </ul>
                    </div>
                </li>
            </ul>
        </nav>
    </header>

    <article id="main">
        <header>
            <h2>Adatbázis Böngésző</h2>
            <p>Válassz táblát a megtekintéshez</p>
        </header>

        <section class="wrapper style5">
            <div class="inner">

                <ul class="actions fit" style="margin-bottom: 3em;">
                    <li>
                        <a href="/adatbazis?tab=filmek"
                           class="button primary fit"
                           th:classappend="${activeTab == 'filmek'} ? 'active'">Filmek</a>
                    </li>
                    <li>
                        <a href="/adatbazis?tab=mozik"
                           class="button primary fit"
                           th:classappend="${activeTab == 'mozik'} ? 'active'">Mozik</a>
                    </li>
                    <li>
                        <a href="/adatbazis?tab=eloadasok"
                           class="button primary fit"
                           th:classappend="${activeTab == 'eloadasok'} ? 'active'">Előadások</a>
                    </li>
                </ul>

                <div th:if="${activeTab == 'filmek'}">
                    <h3>Filmek listája</h3>
                    <div class="table-wrapper">
                        <table class="alt">
                            <thead>
                            <tr>
                                <th>ID</th>
                                <th>Cím</th>
                                <th>Év</th>
                                <th>Hossz (perc)</th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr th:each="film : ${filmek}">
                                <td th:text="${film.id}"></td>
                                <td th:text="${film.cim}"></td>
                                <td th:text="${film.ev}"></td>
                                <td th:text="${film.hossz}"></td>
                            </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <div th:if="${activeTab == 'mozik'}">
                    <h3>Mozik listája</h3>
                    <div class="table-wrapper">
                        <table class="alt">
                            <thead>
                            <tr>
                                <th>ID</th>
                                <th>Név</th>
                                <th>Város</th>
                                <th>Férőhely</th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr th:each="mozi : ${mozik}">
                                <td th:text="${mozi.id}"></td>
                                <td th:text="${mozi.nev}"></td>
                                <td th:text="${mozi.varos}"></td>
                                <td th:text="${mozi.ferohely}"></td>
                            </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <div th:if="${activeTab == 'eloadasok'}">
                    <h3>Előadások (100 db / oldal)</h3>
                    <div class="table-wrapper">
                        <table class="alt">
                            <thead>
                            <tr>
                                <th>Dátum</th>
                                <th>Film Címe</th>
                                <th>Mozi Neve</th>
                                <th>Nézőszám</th>
                                <th>Bevétel</th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr th:each="eloadas : ${eloadasok.content}">
                                <td th:text="${eloadas.datum}"></td>
                                <td th:text="${eloadas.film.cim}"></td>
                                <td th:text="${eloadas.mozi.nev}"></td>
                                <td th:text="${eloadas.nezoszam}"></td>
                                <td th:text="${eloadas.bevetel}"></td>
                            </tr>
                            </tbody>
                        </table>
                    </div>

                    <div class="pagination">
                        <a th:if="${eloadasok.hasPrevious()}"
                           th:href="@{/adatbazis(tab='eloadasok', page=${currentPage - 1})}"
                           class="button small">&laquo; Előző</a>

                        <span>Oldal: <span th:text="${currentPage + 1}"></span> / <span th:text="${eloadasok.totalPages}"></span></span>

                        <a th:if="${eloadasok.hasNext()}"
                           th:href="@{/adatbazis(tab='eloadasok', page=${currentPage + 1})}"
                           class="button small">Következő &raquo;</a>
                    </div>
                </div>

            </div>
        </section>
    </article>

    <footer id="footer">
        <ul class="copyright"><li>&copy; Minden jog fenntartva.</li><li>Design: <a href="http://html5up.net">HTML5 UP</a></li></ul>
    </footer>

</div>

<script src="/assets/js/jquery.min.js"></script>
<script src="/assets/js/jquery.scrollex.min.js"></script>
<script src="/assets/js/jquery.scrolly.min.js"></script>
<script src="/assets/js/browser.min.js"></script>
<script src="/assets/js/breakpoints.min.js"></script>
<script src="/assets/js/util.js"></script>
<script src="/assets/js/main.js"></script>

</body>
</html>